# –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –ø–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ API —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π

**–î–∞—Ç–∞:** 2025-10-06  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** –í–ª–∞–¥–µ–ª–µ—Ü API —Å 20-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º  
**–í–µ—Ä—Å–∏—è:** 1.0

---

## –†–µ–∑—é–º–µ —Ä–∞–±–æ—Ç

–í—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è OpenAPI 3.1 —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π API. –ü—Ä–æ–≤–µ–¥–µ–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, –≤—ã—è–≤–ª–µ–Ω—ã —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è, —Å–æ–∑–¥–∞–Ω—ã –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —ç–≤–æ–ª—é—Ü–∏–∏ API.

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

‚úÖ **–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è OpenAPI 3.1 —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è** (`openapi.yaml`)
- 47 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- 25+ —Å—Ö–µ–º –¥–∞–Ω–Ω—ã—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
- –í—Å–µ security schemes –æ–ø–∏—Å–∞–Ω—ã
- –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è** (`API_DISCREPANCIES.md`)
- 3 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º—ã –≤—ã—è–≤–ª–µ–Ω—ã
- 1 –ø—Ä–æ–±–ª–µ–º–∞ —Å—Ä–µ–¥–Ω–µ–π –≤–∞–∂–Ω–æ—Å—Ç–∏
- –î–ª—è –∫–∞–∂–¥–æ–π –ø—Ä–æ–±–ª–µ–º—ã —É–∫–∞–∑–∞–Ω—ã path:lines –≤ –∫–æ–¥–µ
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω—ã —Ä–µ—à–µ–Ω–∏—è

‚úÖ **–°–æ–∑–¥–∞–Ω—ã –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã** (`tests/contract/`)
- 150+ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–µ–π—Å–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

‚úÖ **–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —ç–≤–æ–ª—é—Ü–∏–∏** (`API_EVOLUTION_STRATEGY.md`)
- –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- Deprecation policy
- –ü—Ä–∏–º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ß–µ–∫–ª–∏—Å—Ç—ã –¥–ª—è code review

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

```
project/
‚îú‚îÄ‚îÄ openapi.yaml                      # OpenAPI 3.1 —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è (–≥–ª–∞–≤–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç)
‚îú‚îÄ‚îÄ API_DISCREPANCIES.md              # –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è—Ö
‚îú‚îÄ‚îÄ API_EVOLUTION_STRATEGY.md         # –°—Ç—Ä–∞—Ç–µ–≥–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —ç–≤–æ–ª—é—Ü–∏–∏
‚îú‚îÄ‚îÄ API_SYNC_SUMMARY.md              # –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç
‚îî‚îÄ‚îÄ tests/
    ‚îî‚îÄ‚îÄ contract/
        ‚îú‚îÄ‚îÄ README.md                 # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∞–º
        ‚îú‚îÄ‚îÄ conftest.py               # –û–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã
        ‚îú‚îÄ‚îÄ test_openapi_contract.py  # –ö–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã (1200+ —Å—Ç—Ä–æ–∫)
        ‚îî‚îÄ‚îÄ test_schema_validation.py # –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å—Ö–µ–º (600+ —Å—Ç—Ä–æ–∫)
```

---

## –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (3)

#### 1. –ù–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Preview —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:** `POST /v1/projects/{id}/preview/stop`, `GET /v1/projects/{id}/preview/status`
- **–§–∞–π–ª—ã:** `api/routers/preview.py:27-45`
- **–ü—Ä–æ–±–ª–µ–º–∞:** TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, —Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–†–∏—Å–∫:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P1 - HIGH

#### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:** `GET /v1/analytics/system`, `GET /v1/analytics/export`
- **–§–∞–π–ª—ã:** `api/routers/analytics.py:47-49`, `api/routers/analytics.py:125-127`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –õ—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É
- **–†–∏—Å–∫:** **SECURITY VULNERABILITY** - —É—Ç–µ—á–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0 - CRITICAL

#### 3. –°–º–µ—à–∞–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ sync/async –≤ Preview
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:** –í—Å–µ preview —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- **–§–∞–π–ª—ã:** `api/routers/preview.py:13-45`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π `get_db` –≤ async —Ñ—É–Ω–∫—Ü–∏–∏
- **–†–∏—Å–∫:** –î–µ–≥—Ä–∞–¥–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –≤–æ–∑–º–æ–∂–Ω—ã–µ deadlocks
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P1 - HIGH

### üü° –°—Ä–µ–¥–Ω–µ–π –≤–∞–∂–Ω–æ—Å—Ç–∏ (1)

#### 4. –ù–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ async —Å–µ—Å—Å–∏–π
- **–§–∞–π–ª—ã:** `api/routers/preview.py`, `api/routers/user.py:39`, `api/routers/gitverse.py:15`
- **–ü—Ä–æ–±–ª–µ–º–∞:** 20% —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç sync –ë–î
- **–†–∏—Å–∫:** –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å, —É—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P2 - MEDIUM

---

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è

### –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –≠–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ | –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã | –ü–æ–∫—Ä—ã—Ç–∏–µ |
|-----------|------------|-----------------|----------|
| Authentication | 7 | 7 | 100% ‚úÖ |
| Projects | 4 | 4 | 100% ‚úÖ |
| API Keys | 6 | 6 | 100% ‚úÖ |
| Models | 2 | 2 | 100% ‚úÖ |
| WebSocket | 1 | 1 | 100% ‚úÖ |
| Preview | 3 | 3 | 100% ‚ö†Ô∏è |
| Notifications | 4 | 4 | 100% ‚úÖ |
| Plugins | 7 | 7 | 100% ‚úÖ |
| Analytics | 4 | 4 | 100% ‚ö†Ô∏è |
| Usage | 5 | 5 | 100% ‚úÖ |
| User | 2 | 2 | 100% ‚úÖ |
| Health | 5 | 5 | 100% ‚úÖ |
| **–ò—Ç–æ–≥–æ** | **47** | **47** | **100%** |

‚ö†Ô∏è - –° –æ–≥–æ–≤–æ—Ä–∫–∞–º–∏ (—Å–º. —Ä–∞–∑–¥–µ–ª "–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è")

### –°—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –°—Ö–µ–º | –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã | –ü–æ–∫—Ä—ã—Ç–∏–µ |
|-----------|------|------------|----------|
| Auth | 5 | 5 | 100% |
| Projects | 4 | 4 | 100% |
| User | 1 | 1 | 100% |
| API Keys | 4 | 4 | 100% |
| Models | 2 | 2 | 100% |
| Plugins | 1 | 1 | 100% |
| Health | 2 | 2 | 100% |
| Errors | 2 | 2 | 100% |
| **–ò—Ç–æ–≥–æ** | **25** | **25** | **100%** |

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –¶–µ–ª—å | –°—Ç–∞—Ç—É—Å |
|---------|----------|------|--------|
| Async/Await usage | 80% | 100% | üü° |
| Type annotations | 95% | 90% | ‚úÖ |
| Pydantic validation | 100% | 100% | ‚úÖ |
| Error handling | 95% | 90% | ‚úÖ |
| Security checks | 85% | 100% | üü° |

---

## –ö–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –º–æ–¥—É–ª–∏

#### 1. `test_openapi_contract.py` (1200+ —Å—Ç—Ä–æ–∫)

**–ö–ª–∞—Å—Å—ã —Ç–µ—Å—Ç–æ–≤:**
- `TestOpenAPISpecification` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `TestEndpointCoverage` - –ø–æ–∫—Ä—ã—Ç–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- `TestAuthenticationEndpoints` - —Ç–µ—Å—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `TestProjectEndpoints` - —Ç–µ—Å—Ç—ã –ø—Ä–æ–µ–∫—Ç–æ–≤
- `TestApiKeysEndpoints` - —Ç–µ—Å—Ç—ã API –∫–ª—é—á–µ–π
- `TestModelsEndpoints` - —Ç–µ—Å—Ç—ã –º–æ–¥–µ–ª–µ–π
- `TestHealthEndpoints` - —Ç–µ—Å—Ç—ã health checks
- `TestErrorResponses` - —Ç–µ—Å—Ç—ã –æ—à–∏–±–æ–∫
- `TestRateLimiting` - —Ç–µ—Å—Ç—ã rate limiting
- `TestDeprecation` - —Ç–µ—Å—Ç—ã deprecation

**–ü–æ–∫—Ä—ã—Ç–∏–µ:** 
- 47/47 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (100%)
- 100+ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–µ–π—Å–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π

#### 2. `test_schema_validation.py` (600+ —Å—Ç—Ä–æ–∫)

**–ö–ª–∞—Å—Å—ã —Ç–µ—Å—Ç–æ–≤:**
- `TestAuthSchemas` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `TestProjectSchemas` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º –ø—Ä–æ–µ–∫—Ç–æ–≤
- `TestUserSchema` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `TestErrorSchema` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º –æ—à–∏–±–æ–∫
- `TestDataFormats` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- `TestFieldConstraints` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- `TestSchemaConsistency` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

**–ü–æ–∫—Ä—ã—Ç–∏–µ:**
- 25+ —Å—Ö–µ–º –¥–∞–Ω–Ω—ã—Ö
- 50+ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–µ–π—Å–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ edge cases

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã
pytest tests/contract/ -v

# –° coverage
pytest tests/contract/ --cov=samokoder.api --cov-report=html

# –í –ø–∞—Ä–∞–ª–ª–µ–ª—å
pytest tests/contract/ -n auto
```

---

## –°—Ç—Ä–∞—Ç–µ–≥–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —ç–≤–æ–ª—é—Ü–∏–∏

### –ü—Ä–∏–Ω—Ü–∏–ø—ã

1. **Backward Compatibility First** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
2. **Explicit over Implicit** - —è–≤–Ω–æ—Å—Ç—å –≤–º–µ—Å—Ç–æ –Ω–µ—è–≤–Ω–æ—Å—Ç–∏
3. **Fail Loudly** - –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
4. **Progressive Enhancement** - –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ

### –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥:** URL-based versioning
```
/v1/projects  ‚Üê —Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è
/v2/projects  ‚Üê –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è (–ø—Ä–∏ breaking changes)
```

### –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

#### üü¢ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ (Non-Breaking)
- –ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- –ù–æ–≤—ã–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö
- –ù–æ–≤—ã–µ –ø–æ–ª—è –≤ –æ—Ç–≤–µ—Ç–∞—Ö
- –ù–æ–≤—ã–µ query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –ù–æ–≤—ã–µ HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥—ã
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ enum –∑–Ω–∞—á–µ–Ω–∏–π
- –ë–æ–ª–µ–µ –º—è–≥–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

#### üî¥ Breaking Changes
- –£–¥–∞–ª–µ–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –∏–∑ –æ—Ç–≤–µ—Ç–æ–≤
- –ù–æ–≤—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–µ–º–∞–Ω—Ç–∏–∫–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
- –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

### Deprecation Policy

**Timeline:**
```
T+0     Announcement (email, blog, docs)
T+1 mo  Deprecation warnings in responses
T+3 mo  API console warnings
T+6 mo  Soft sunset (rate limiting)
T+12 mo Hard sunset (404 responses)
T+18 mo Code deletion
```

**Headers:**
```http
Deprecation: true
Sunset: Sat, 31 Dec 2025 23:59:59 GMT
Link: </v2/projects>; rel="alternate"
X-API-Warn: "Migrate to /v2/projects by 2025-12-31"
```

---

## –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π (Action Items)

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (P0 - Security) üî¥

- [ ] **P0-1:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ analytics —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
  - **–§–∞–π–ª—ã:** `api/routers/analytics.py:47-49`, `api/routers/analytics.py:125-127`
  - **–°—Ä–æ–∫:** 2 –¥–Ω—è
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Backend Lead
  - **–†–∏—Å–∫:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - —É—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (P1 - Functionality) üü°

- [ ] **P1-1:** –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é preview —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
  - **–§–∞–π–ª—ã:** `api/routers/preview.py:27-45`
  - **–°—Ä–æ–∫:** 1 –Ω–µ–¥–µ–ª—è
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** ProcessManager –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

- [ ] **P1-2:** –í–∫–ª—é—á–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–∞–∑–≤–∞–Ω–∏–π –ø—Ä–æ–µ–∫—Ç–æ–≤
  - **–§–∞–π–ª—ã:** `core/api/models/projects.py:18-38`
  - **–°—Ä–æ–∫:** 3 –¥–Ω—è

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (P2 - Architecture) üü¢

- [ ] **P2-1:** –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ä–æ—É—Ç–µ—Ä—ã –Ω–∞ async/await
  - **–§–∞–π–ª—ã:** `api/routers/preview.py`, `api/routers/user.py:39`, `api/routers/gitverse.py:15`
  - **–°—Ä–æ–∫:** 2 –Ω–µ–¥–µ–ª–∏

- [ ] **P2-2:** –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ get_async_db
  - **–§–∞–π–ª—ã:** –≤—Å–µ —Ä–æ—É—Ç–µ—Ä—ã
  - **–°—Ä–æ–∫:** 1 –Ω–µ–¥–µ–ª—è

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (P3 - Improvements)

- [ ] **P3-1:** –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É `/health` —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏
  - **–°—Ä–æ–∫:** 2 –¥–Ω—è

- [ ] **P3-2:** –î–æ–±–∞–≤–∏—Ç—å rate limiting –¥–ª—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
  - **–°—Ä–æ–∫:** 1 –Ω–µ–¥–µ–ª—è

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-3 –º–µ—Å—è—Ü–∞)

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
   - –î–æ–±–∞–≤–∏—Ç—å RBAC –¥–ª—è –∞–¥–º–∏–Ω—Å–∫–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
   - –ü—Ä–æ–≤–µ—Å—Ç–∏ security audit

2. **–ó–∞–≤–µ—Ä—à–∏—Ç—å –Ω–µ–¥–æ—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**
   - Preview —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

3. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É**
   - –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ async/await –≤–µ–∑–¥–µ
   - –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π –ë–î

4. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã –≤ CI/CD**
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å GitHub Actions
   - –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å PR –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (3-6 –º–µ—Å—è—Ü–µ–≤)

1. **–£–ª—É—á—à–∏—Ç—å monitoring –∏ observability**
   - –î–æ–±–∞–≤–∏—Ç—å tracing –¥–ª—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –Ω–∞ –∞–Ω–æ–º–∞–ª–∏–∏

2. **–†–∞—Å—à–∏—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏**
   - E2E —Ç–µ—Å—Ç—ã
   - Performance —Ç–µ—Å—Ç—ã
   - Security —Ç–µ—Å—Ç—ã

3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
   - –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å N+1 queries
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å connection pooling

4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤**
   - SDK –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —è–∑—ã–∫–æ–≤
   - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã
   - Video tutorials

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (6-12 –º–µ—Å—è—Ü–µ–≤)

1. **API v2 –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –°–æ–±—Ä–∞—Ç—å feedback –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤
   - –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–∏—è
   - –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å migration guide

2. **GraphQL Gateway (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**
   - –î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å —Å–ª–æ–∂–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏
   - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å REST API

3. **API Analytics**
   - –¢—Ä–µ–∫–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ deprecated —Ñ—É–Ω–∫—Ü–∏–π
   - Usage-based billing –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å

---

## –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ | –¶–µ–ª—å | –î–∞—Ç–∞ |
|---------|---------|------|------|
| API Coverage | 100% | 100% | ‚úÖ –î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ |
| Contract Tests | 150+ | 200+ | 2025-11-01 |
| Response Time p95 | ? | < 200ms | 2025-12-01 |
| Error Rate | ? | < 0.1% | 2025-12-01 |
| Security Score | 85% | 95% | 2025-11-01 |

### –ë–∏–∑–Ω–µ—Å –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ | –¶–µ–ª—å | –î–∞—Ç–∞ |
|---------|---------|------|------|
| API Uptime | ? | 99.9% | Ongoing |
| Breaking Changes | 0 | 0 | Ongoing |
| Client Satisfaction | ? | > 4.5/5 | 2025-12-01 |
| Support Tickets | ? | -20% | 2026-03-01 |

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### A. –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- **OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è:** `openapi.yaml` (2000+ —Å—Ç—Ä–æ–∫)
- **–û—Ç—á–µ—Ç –æ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è—Ö:** `API_DISCREPANCIES.md` (800+ —Å—Ç—Ä–æ–∫)
- **–°—Ç—Ä–∞—Ç–µ–≥–∏—è —ç–≤–æ–ª—é—Ü–∏–∏:** `API_EVOLUTION_STRATEGY.md` (1500+ —Å—Ç—Ä–æ–∫)
- **–ö–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã:** `tests/contract/` (2000+ —Å—Ç—Ä–æ–∫)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤:** `tests/contract/README.md` (300+ —Å—Ç—Ä–æ–∫)

### B. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–î–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
```bash
pip install openapi-spec-validator
openapi-spec-validator openapi.yaml
```

**–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤:**
```bash
pip install pytest pytest-asyncio httpx
pytest tests/contract/ -v
```

**–î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö SDK:**
```bash
pip install openapi-generator-cli
openapi-generator-cli generate -i openapi.yaml -g python -o client/
```

### C. –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –í–∞–ª–∏–¥–∞—Ü–∏—è OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
openapi-spec-validator openapi.yaml

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
pytest tests/contract/ -v

# –ó–∞–ø—É—Å–∫ —Å coverage
pytest tests/contract/ --cov=samokoder.api --cov-report=html

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–∑ OpenAPI
redoc-cli bundle openapi.yaml -o docs/api.html

# –ü—Ä–æ–≤–µ—Ä–∫–∞ breaking changes (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é)
openapi-diff openapi-v1.0.yaml openapi.yaml
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–≤–µ–¥–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è API —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π. –í—Å–µ 47 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ OpenAPI 3.1 —Ñ–æ—Ä–º–∞—Ç–µ, –≤—ã—è–≤–ª–µ–Ω—ã –∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è, —Å–æ–∑–¥–∞–Ω—ã –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —ç–≤–æ–ª—é—Ü–∏–∏ –±–µ–∑ breaking changes.

### –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

‚úÖ **100% –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π** - –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏  
‚úÖ **150+ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è  
‚úÖ **–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑** - –∫–∞–∂–¥–æ–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —Å path:lines —Å—Å—ã–ª–∫–∞–º–∏  
‚úÖ **–°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–∑–≤–∏—Ç–∏—è** - –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –∏ –ø—Ä–∏–º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π  

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚ö†Ô∏è **–ù–ï–ú–ï–î–õ–ï–ù–ù–û:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (P0)
2. üîß **1 –Ω–µ–¥–µ–ª—è:** –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é preview —Ñ—É–Ω–∫—Ü–∏–π (P1)
3. üìä **2 –Ω–µ–¥–µ–ª–∏:** –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ async/await (P2)
4. üß™ **Ongoing:** –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã –≤ CI/CD

---

**–î–æ–∫—É–º–µ–Ω—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω:** API Owner (20 –ª–µ—Ç –æ–ø—ã—Ç–∞)  
**–î–∞—Ç–∞:** 2025-10-06  
**–í–µ—Ä—Å–∏—è:** 1.0  

**–ö–æ–Ω—Ç–∞–∫—Ç—ã:**
- Email: api-owner@samokoder.io
- Slack: #api-development
- GitHub: @samokoder/api-team

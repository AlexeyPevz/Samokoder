╔═══════════════════════════════════════════════════════════════════════════════════════════╗
║                   SAMOKODER - FOUR GOLDEN SIGNALS DASHBOARD                               ║
║                   http://localhost:3000/d/samokoder-golden-signals                        ║
╚═══════════════════════════════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│ 🔥 ЧЕТЫРЕ ЗОЛОТЫХ СИГНАЛА МОНИТОРИНГА (Four Golden Signals)                           │
└─────────────────────────────────────────────────────────────────────────────────────────┘

╔═══════════════════╦═══════════════════╦═══════════════════╦═══════════════════╗
║  1️⃣  TRAFFIC      ║  2️⃣  LATENCY      ║  3️⃣  ERRORS       ║  4️⃣  SATURATION   ║
║                   ║                   ║                   ║                   ║
║    ┌─────────┐    ║    ┌─────────┐    ║    ┌─────────┐    ║    ┌─────────┐    ║
║    │ 150 RPS │    ║    │ P95:1.2s│    ║    │  0.5%   │    ║    │   45%   │    ║
║    │    🟢   │    ║    │    🟢   │    ║    │    🟢   │    ║    │    🟢   │    ║
║    └─────────┘    ║    └─────────┘    ║    └─────────┘    ║    └─────────┘    ║
║                   ║                   ║                   ║                   ║
║ Requests/sec      ║ API Response Time ║ Error Rate %      ║ CPU Usage %       ║
║ Target: N/A       ║ Target: < 2s      ║ Target: < 1%      ║ Target: < 70%     ║
╚═══════════════════╩═══════════════════╩═══════════════════╩═══════════════════╝

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│ 📊 TRAFFIC DETAILS                                                                      │
├─────────────────────────────────────────────┬───────────────────────────────────────────┤
│ Request Rate by Method                      │ Request Rate by Status Code               │
│                                             │                                           │
│  ▲                                          │  ▲                                        │
│  │     ╱╲    ╱╲                             │  │     ██████  (200)                      │
│  │    ╱  ╲  ╱  ╲     GET                    │  │     ██████                             │
│  │   ╱    ╲╱    ╲                           │  │     ██████                             │
│  │  ╱            ╲   POST                   │  │     ██  ██  (201)                      │
│  │ ╱              ╲                         │  │     ██  ██  (400)                      │
│  └────────────────────► time                │  └────────────────► time                   │
└─────────────────────────────────────────────┴───────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│ ⏱️  LATENCY DETAILS                                                                      │
├─────────────────────────────────────────────┬───────────────────────────────────────────┤
│ API Latency Percentiles                     │ LLM Request Latency P95                   │
│                                             │                                           │
│  ▲                                          │  ▲                                        │
│  │     ────────────── P99 (2.5s)           │  │  ╱╲                                    │
│  │     ──  ──  ──  ─  P95 (1.2s)           │  │ ╱  ╲     OpenAI                        │
│  │     ___  ___  ___  P50 (0.5s)           │  │╱    ╲___                               │
│  │                                          │  │      ╲___╱╲  Anthropic                 │
│  │          SLO Target (2s) ┄┄┄┄┄          │  │          ╲___                          │
│  └────────────────────► time                │  └────────────────► time                   │
└─────────────────────────────────────────────┴───────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│ 🚨 ERRORS DETAILS                                                                       │
├─────────────────────────────────────────────┬───────────────────────────────────────────┤
│ 5xx Error Rate by Status Code               │ LLM Error Rate by Provider                │
│                                             │                                           │
│  ▲                                          │  ▲                                        │
│  │  █                                       │  │                                        │
│  │  █  500 Internal Server Error            │  │   ╱╲                                   │
│  │  █                                       │  │  ╱  ╲  Rate limit errors               │
│  │  █   █  503 Service Unavailable          │  │ ╱    ╲                                 │
│  │  █   █                                   │  │╱      ╲___                             │
│  └────────────────────► time                │  └────────────────► time                   │
└─────────────────────────────────────────────┴───────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│ 📈 SATURATION DETAILS                                                                   │
├──────────────────┬──────────────────┬──────────────────┬──────────────────────────────┤
│ Memory Saturation│ Disk Saturation  │ File Descriptors │ Network Connections          │
│                  │                  │                  │                              │
│  ┌──────────┐    │  ┌──────────┐    │  ┌──────────┐    │  ┌────────────────┐          │
│  │   65%    │    │  │   40%    │    │  │   30%    │    │  │   234 active   │          │
│  │    🟡    │    │  │    🟢    │    │  │    🟢    │    │  │      🟢        │          │
│  └──────────┘    │  └──────────┘    │  └──────────┘    │  └────────────────┘          │
│                  │                  │                  │                              │
│ Used: 5.2/8 GB   │ Used: 20/50 GB   │ 3072/10240       │ ESTABLISHED: 234             │
│ Warn: 80%        │ Warn: 80%        │ Warn: 70%        │ Warn: 1000                   │
│ Crit: 90%        │ Crit: 90%        │ Crit: 85%        │ Crit: 5000                   │
└──────────────────┴──────────────────┴──────────────────┴──────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│ 🎯 SLO & ERROR BUDGET                                                                   │
├──────────────────────────┬──────────────────────────┬──────────────────────────────────┤
│ Availability Budget      │ Latency Budget           │ Error Rate Budget                │
│                          │                          │                                  │
│  ┌──────────────────┐    │  ┌──────────────────┐    │  ┌──────────────────┐            │
│  │                  │    │  │                  │    │  │                  │            │
│  │      87%         │    │  │      92%         │    │  │      95%         │            │
│  │      🟢          │    │  │      🟢          │    │  │      🟢          │            │
│  │                  │    │  │                  │    │  │                  │            │
│  └──────────────────┘    │  └──────────────────┘    │  └──────────────────┘            │
│                          │                          │                                  │
│ Target: 99.9% uptime     │ Target: P95 < 2s         │ Target: < 1% errors              │
│ Budget: 43.2 min/month   │ Budget: 5% can exceed    │ Budget: 1% error rate            │
│                          │                          │                                  │
│ 🟢 GREEN  > 50%          │ 🟡 YELLOW 25-50%         │ 🔴 RED    < 25%                  │
└──────────────────────────┴──────────────────────────┴──────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│ Availability: Current vs Target                                                         │
│                                                                                         │
│  ▲                                                                                      │
│  │ 100% ┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄                                        │
│  │                                                                                      │
│  │ 99.9% ══════════════════════════════════════  SLO Target                            │
│  │                                                                                      │
│  │ 99.95% ────────────────────────────────────  Current Availability                   │
│  │                                                                                      │
│  │ 99% ┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄                                        │
│  └────────────────────────────────────────────────────► Last 1 hour                     │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│ 💾 DATABASE METRICS                                                                     │
├─────────────────────────────────────────────┬───────────────────────────────────────────┤
│ Database Query Latency P95                  │ Database Error Rate                       │
│                                             │                                           │
│  ▲                                          │  ▲                                        │
│  │     ───────────                          │  │                                        │
│  │     ──  ──  ──  ── (0.05s)               │  │  █                                     │
│  │     ___  ___  ___                        │  │  █  Connection errors                  │
│  │                                          │  │  █                                     │
│  │          Target: < 1s                    │  │  █                                     │
│  └────────────────────► time                │  └────────────────────► time               │
└─────────────────────────────────────────────┴───────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│ 🤖 LLM METRICS                                                                          │
├─────────────────────────────────────────────┬───────────────────────────────────────────┤
│ LLM Requests by Provider                    │ LLM Token Consumption Rate                │
│                                             │                                           │
│  ▲                                          │  ▲                                        │
│  │     ╱╲    ╱╲                             │  │     ████████  prompt tokens            │
│  │    ╱  ╲  ╱  ╲     OpenAI                 │  │     ████████                           │
│  │   ╱    ╲╱    ╲                           │  │     ████████                           │
│  │  ╱      ╱╲    ╲   Anthropic              │  │     ████  ██  completion tokens        │
│  │ ╱      ╱  ╲    ╲                         │  │     ████  ██                           │
│  └────────────────────► time                │  └────────────────► time                   │
└─────────────────────────────────────────────┴───────────────────────────────────────────┘

╔═══════════════════════════════════════════════════════════════════════════════════════════╗
║                              QUICK REFERENCE LEGEND                                       ║
╠═══════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                           ║
║  Status Indicators:                           Severity Colors:                           ║
║    🟢 GREEN   - Normal, within SLO               🟢 < Warning threshold                  ║
║    🟡 YELLOW  - Warning, degraded                🟡 Warning ≤ x < Critical               ║
║    🔴 RED     - Critical, SLO violated           🔴 ≥ Critical threshold                 ║
║                                                                                           ║
║  SLO Targets (Production):                   Alert Response Times:                       ║
║    Availability:  ≥ 99.9%                       🔴 Critical: 15 minutes                  ║
║    Latency P95:   < 2 seconds                   🟡 Warning:  2 hours                     ║
║    Error Rate:    < 1%                          🔵 Info:     Best effort                 ║
║                                                                                           ║
║  Auto-refresh: 10 seconds                     Measurement window: 5 minutes              ║
║                                                                                           ║
╚═══════════════════════════════════════════════════════════════════════════════════════════╝

╔═══════════════════════════════════════════════════════════════════════════════════════════╗
║                              THRESHOLD SUMMARY TABLE                                      ║
╠═══════════════════════════╦═══════════╦═══════════════╦═══════════════╦═══════════════════╣
║ Metric                    ║ Target    ║ Warning       ║ Critical      ║ Current Status    ║
╠═══════════════════════════╬═══════════╬═══════════════╬═══════════════╬═══════════════════╣
║ Traffic (RPS)             ║ N/A       ║ > 100         ║ > 500         ║ 150 🟡            ║
║ Latency P95               ║ < 2s      ║ 2-5s          ║ > 5s          ║ 1.2s 🟢           ║
║ Error Rate                ║ < 1%      ║ 1-5%          ║ > 5%          ║ 0.5% 🟢           ║
║ CPU Usage                 ║ < 70%     ║ 70-90%        ║ > 90%         ║ 45% 🟢            ║
║ Memory Usage              ║ < 80%     ║ 80-90%        ║ > 90%         ║ 65% 🟢            ║
║ Disk Usage                ║ < 80%     ║ 80-90%        ║ > 90%         ║ 40% 🟢            ║
║ File Descriptors          ║ < 70%     ║ 70-85%        ║ > 85%         ║ 30% 🟢            ║
║ DB Connection Pool        ║ < 70%     ║ 70-80%        ║ > 80%         ║ 45% 🟢            ║
║ Network Connections       ║ < 1000    ║ 1000-5000     ║ > 5000        ║ 234 🟢            ║
║ Error Budget (Avail)      ║ > 50%     ║ 25-50%        ║ < 25%         ║ 87% 🟢            ║
║ Error Budget (Latency)    ║ > 50%     ║ 25-50%        ║ < 25%         ║ 92% 🟢            ║
║ Error Budget (Errors)     ║ > 50%     ║ 25-50%        ║ < 25%         ║ 95% 🟢            ║
╚═══════════════════════════╩═══════════╩═══════════════╩═══════════════╩═══════════════════╝

╔═══════════════════════════════════════════════════════════════════════════════════════════╗
║                              ALERT FIRING CONDITIONS                                      ║
╠═══════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                           ║
║  🔴 CRITICAL ALERTS (Immediate action required - 15 min SLA):                            ║
║     • APIDown                    - API service is down for > 1 minute                    ║
║     • AvailabilitySLOViolation   - Availability below 99.9% for > 5 minutes              ║
║     • ErrorBudgetCritical        - Error budget < 10% remaining                          ║
║     • LowDiskSpace               - Disk free space < 10% for > 5 minutes                 ║
║                                                                                           ║
║  🟡 WARNING ALERTS (Action within 2 hours):                                               ║
║     • HighLatency                - P95 latency > 5s for > 10 minutes                     ║
║     • LatencySLOViolation        - P95 latency > 2s for > 10 minutes                     ║
║     • HighErrorRate              - Error rate > 5% for > 5 minutes                       ║
║     • ErrorBudgetLow             - Error budget < 25% remaining                          ║
║     • HighCPUUsage               - CPU > 80% for > 10 minutes                            ║
║     • HighMemoryUsage            - Memory > 85% for > 10 minutes                         ║
║     • HighFileDescriptorUsage    - FD usage > 80% for > 5 minutes                        ║
║     • DatabaseConnectionPoolSat. - DB pool > 80% for > 5 minutes                         ║
║     • WorkerQueueSaturated       - Worker queue > 80% for > 10 minutes                   ║
║                                                                                           ║
║  🔵 INFO ALERTS (Best effort):                                                            ║
║     • HighRateLimitHits          - Rate limiting triggered frequently                    ║
║     • NoProjectsCreated          - No projects in 2 hours (possible issue)               ║
║                                                                                           ║
╚═══════════════════════════════════════════════════════════════════════════════════════════╝

╔═══════════════════════════════════════════════════════════════════════════════════════════╗
║                              QUICK ACTION GUIDE                                           ║
╠═══════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                           ║
║  If you see 🔴 RED indicators:                                                            ║
║    1. Check AlertManager for active alerts: http://localhost:9093                        ║
║    2. Review logs: docker-compose logs -f api                                            ║
║    3. Check health endpoint: curl http://localhost:8000/health                           ║
║    4. Consider rollback: ./ops/scripts/rollback.sh --service=api --auto                  ║
║                                                                                           ║
║  If Error Budget is depleting:                                                           ║
║    1. STOP all non-critical deployments                                                  ║
║    2. Focus on stability improvements                                                    ║
║    3. Investigate root cause of errors/downtime                                          ║
║    4. Schedule post-mortem meeting                                                       ║
║                                                                                           ║
║  Before any deployment:                                                                  ║
║    1. Verify all indicators are 🟢 GREEN                                                  ║
║    2. Error budget > 25%                                                                 ║
║    3. No saturation warnings                                                             ║
║    4. Run: ./ops/scripts/smoke-test.sh                                                   ║
║                                                                                           ║
║  After deployment:                                                                       ║
║    1. Monitor this dashboard for 10 minutes                                              ║
║    2. Watch for any 🟡 or 🔴 indicators                                                   ║
║    3. If issues appear → rollback immediately                                            ║
║    4. Run: ./ops/scripts/smoke-test.sh                                                   ║
║                                                                                           ║
╚═══════════════════════════════════════════════════════════════════════════════════════════╝

Dashboard version: 1.0
Last updated: 2025-10-06
Auto-refresh: 10 seconds
Data source: Prometheus (localhost:9090)
